<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GD Demon List - –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="logo-gradient">GD DEMON LIST</h1>
            <nav>
                <a href="index.html">–¢–æ–ø —É—Ä–æ–≤–Ω–µ–π</a>
                <a href="players.html" class="active">–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</a>
                <a href="challenge-list.html">–°–ø–∏—Å–æ–∫ –∏—Å–ø—ã—Ç–∞–Ω–∏–π</a>
                <a href="challenge-top.html">–¢–æ–ø –∏—Å–ø—ã—Ç–∞–Ω–∏–π</a>
                <a href="verify.html">–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è</a>
                <a href="about.html">–û –Ω–∞—Å</a>
            </nav>
        </header>

        <main class="main-content">
            <div class="list-info">
                <h2>üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</h2>
                <p>–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –æ—á–∫–∞–º –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –¥–µ–º–æ–Ω–æ–≤ –∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π</p>
            </div>
            
            <!-- –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤ -->
            <div class="search-container">
                <input type="text" id="player-search" placeholder="–ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤...">
                <button id="search-btn">–ù–∞–π—Ç–∏</button>
            </div>
            
            <!-- –§–∏–ª—å—Ç—Ä—ã -->
            <div class="filter-container">
                <button class="filter-btn active" data-filter="all">–í—Å–µ –∏–≥—Ä–æ–∫–∏</button>
                <button class="filter-btn" data-filter="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã</button>
                <button class="filter-btn" data-filter="top-demons">–¢–æ–ø –ø–æ –¥–µ–º–æ–Ω–∞–º</button>
                <button class="filter-btn" data-filter="top-challenges">–¢–æ–ø –ø–æ –∏—Å–ø—ã—Ç–∞–Ω–∏—è–º</button>
            </div>
            
            <div id="players-container">
                <!-- –ò–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </main>
    </div>

    <script src="data.js"></script>
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤
        function renderPlayers(players = window.gdData.players) {
            const container = document.getElementById('players-container');
            
            if (players.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <h3>–ò–≥—Ä–æ–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = players.map(player => `
                <div class="player-item">
                    <div class="player-rank">${player.rank}</div>
                    <div class="player-info">
                        <div class="player-name">
                            ${player.name}
                            ${player.isAdmin ? '<span class="admin-badge">–ê–¥–º–∏–Ω</span>' : ''}
                        </div>
                        <div class="player-stats">
                            <span>–î–µ–º–æ–Ω–æ–≤: ${player.demons}</span>
                            <span>–û—á–∫–∏ –¥–µ–º–æ–Ω–æ–≤: ${player.demonPoints}</span>
                            <span>–ò—Å–ø—ã—Ç–∞–Ω–∏–π: ${player.challenges}</span>
                            <span>–û—á–∫–∏ –∏—Å–ø—ã—Ç–∞–Ω–∏–π: ${player.challengePoints}</span>
                            <span class="total-points">–í—Å–µ–≥–æ –æ—á–∫–æ–≤: ${player.totalPoints}</span>
                        </div>
                        <div class="passed-levels">
                            <strong>–ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –¥–µ–º–æ–Ω—ã:</strong>
                            ${player.passedLevels.map(levelId => {
                                const level = window.gdData.levels.find(l => l.id === levelId);
                                return level ? `#${level.rank} ${level.name} (${level.points} –æ—á–∫–æ–≤)` : '';
                            }).filter(Boolean).join(', ')}
                        </div>
                        <div class="passed-levels">
                            <strong>–ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è:</strong>
                            ${player.passedChallenges.map(challengeId => {
                                const challenge = window.gdData.challenges.find(c => c.id === challengeId);
                                return challenge ? `#${challenge.rank} ${challenge.name} (${challenge.points} –æ—á–∫–æ–≤)` : '';
                            }).filter(Boolean).join(', ')}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–æ–≤
        function setupPlayerSearch() {
            const searchInput = document.getElementById('player-search');
            const searchBtn = document.getElementById('search-btn');
            
            function performSearch() {
                const query = searchInput.value.trim();
                if (query === '') {
                    renderPlayers();
                } else {
                    const filteredPlayers = window.gdData.searchPlayers(query);
                    renderPlayers(filteredPlayers);
                }
            }
            
            searchBtn.addEventListener('click', performSearch);
            searchInput.addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    performSearch();
                }
            });
        }

        // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–≥—Ä–æ–∫–æ–≤
        function setupPlayerFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            filterBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
                    filterBtns.forEach(b => b.classList.remove('active'));
                    // –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–µ–∫—É—â–µ–π –∫–Ω–æ–ø–∫–µ
                    this.classList.add('active');
                    
                    const filter = this.dataset.filter;
                    let filteredPlayers = [...window.gdData.players];
                    
                    switch(filter) {
                        case 'admin':
                            filteredPlayers = filteredPlayers.filter(player => player.isAdmin);
                            break;
                        case 'top-demons':
                            filteredPlayers.sort((a, b) => b.demonPoints - a.demonPoints);
                            break;
                        case 'top-challenges':
                            filteredPlayers.sort((a, b) => b.challengePoints - a.challengePoints);
                            break;
                        default:
                            // "all" - –Ω–∏—á–µ–≥–æ –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É–µ–º
                            break;
                    }
                    
                    renderPlayers(filteredPlayers);
                });
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            renderPlayers();
            setupPlayerSearch();
            setupPlayerFilters();
        });
    </script>
</body>
</html>